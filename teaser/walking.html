<html>
<meta charset="utf-8">

<style>
text {
  font: bold 48px monospace;
}

.enter {
  fill: green;
}

.update {
  fill: #333;
}

.exit {
  fill: brown;
}

line {
stroke-width: .1;
}

svg {
border: 1px double;
border-width: 10px;
}


</style>
<body>
<script src="d3.js"></script>
<script>

var colors = [
    '#f44',
    '#4f4',
    '#222',
    '#44f',
];

////////////////////////////////////////
var width = 1000,
    height = 1000,
    unit = 28,
    speed_in_ms = 35;
    
var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height)
    .append("g")
    .attr("transform", "translate(" + (width/2) + "," + (height/2) + ") scale(" + unit + ")");

function update(adn) {

    // DATA JOIN
    // Join new data with old elements, if any.
    var lines = svg.selectAll("line")
	.data(adn, function(d, i) { return i; });

    // ENTER
    // Create new elements as needed.
    lines.enter().append("line")
	.attr("class", "enter")
	.attr("x1", function(d){console.log(d); return d[0]})
	.attr("y1", function(d){return d[1]})
	.attr("x2", function(d){return d[2]})
	.attr("y2", function(d){return d[3]})
	.attr('stroke', function(d){return colors[d[4]];})
    ;
    
}

var current = [0, 0];

/* prev-x, prev-y, new-x, new-y, color, letter */
PATH = [];

var tick = function() {
    var r = Math.random();
    var previous = current.slice();
    if (r < 0.25)	{ current[0] += 1; color = 0; letter = 'C';}
    else if (r < 0.5)	{ current[1] += 1; color = 1; letter = 'A';}
    else if (r < 0.75)	{ current[0] -= 1; color = 2; letter = 'G';}
    else		{ current[1] -= 1; color = 3; letter = 'T';}
    
    PATH.push(previous.concat(current.concat([color, letter])));
    update(PATH)
}

// Grab a random sample of letters from the alphabet, in alphabetical order.
tick();
setInterval(tick, speed_in_ms);
</script>
</html>
